<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.10.xsd">
    <changeSet author="hakan.gungor" id="VERBAL-1-2022-04-01 20:21" context="sql">
        <sql splitStatements="true">
            create table olay_kayit
            (
                id bigint generated by default as identity
                    constraint pk_olay_kayit primary key,
                doctor_approve_date timestamp,
                deleted boolean default false NOT NULL,
                olay varchar NOT NULL,
                numara varchar(8) NOT NULL,
                onay_durumu varchar NOT NULL,
                gorulme_durumu boolean default false NOT NULL,
                view_date timestamp,
                doctor_name varchar,
                nurse_name varchar,
                order_created_date timestamp,
                patient_no varchar,
                patient_name varchar,
                patient_birthdate date,
                floor integer,
                floor_detail varchar
           );
            comment on column olay_kayit.doctor_approve_date is 'doktorun sms mesajı uzerinden islem yaptigi tarih';
            comment on column olay_kayit.olay is 'order, tetkik panikdeger seklinde olay tipi';
            comment on column olay_kayit.numara is 'order, tetkik, panikdeger numarasi';
            comment on column olay_kayit.onay_durumu is 'doktorun ekrandan sectigi cevap';
            comment on column olay_kayit.gorulme_durumu is 'hemsirenin ekrandan goruldu onayi verme durumu';
            comment on column olay_kayit.view_date is 'hemsirenin ekranda goruldu yaptigi zamani';
            comment on column olay_kayit.doctor_name is 'ordera muhatap doktor adi soyadi';
            comment on column olay_kayit.nurse_name is 'order olusturan hemsire adi soyadi';
            comment on column olay_kayit.order_created_date is 'hemsirenin order olusturdugu zaman';
            comment on column olay_kayit.patient_no is 'hasta numarasi';
            comment on column olay_kayit.patient_name is 'hasta adi soyadi';
            comment on column olay_kayit.patient_birthdate is 'hasta dogum tarihi';
            comment on column olay_kayit.floor is 'hasta katı iliski numarasi';
            comment on column olay_kayit.floor_detail is 'hasta yattiği kat ve taburcu durumu';
        </sql>
    </changeSet>



    <changeSet author="hakan.gungor" id="VERBAL-1-2022-06-03 23:12" context="sql">
        <sql splitStatements="true">
            create table olay_detay
            (
                id bigint generated by default as identity
                    constraint pk_olay_detay primary key,
                islem_tarihi timestamp NOT NULL,
                islem_adi varchar NOT NULL,
                sonuc varchar,
                frekans_deger varchar NOT NULL,
                numara varchar(8) NOT NULL,
                deleted boolean default false NOT NULL,
                created_date timestamp NOT NULL
            );
            comment on column olay_detay.islem_tarihi is 'yapilacak islemin monad veri tabaninda olusturulma tarihi';
            comment on column olay_detay.islem_adi is 'yapilacak islem';
            comment on column olay_detay.sonuc is 'panikdeger tipindeki olaylarda bu deger bulunur';
            comment on column olay_detay.frekans_deger is 'yapilacak islemin frekansAdet degeri';
            comment on column olay_detay.numara is 'order numarasi, tetkik numarasi, panikdeger numarasi gibi';
            comment on column olay_detay.created_date is 'detay kaydinin verbal-order-service veri tabanina kayit zamani';
        </sql>
    </changeSet>

    <changeSet author="hakan.gungor" id="VERBAL-1-2022-04-10 20:41" context="sql">
        <sql splitStatements="true">
            ALTER SEQUENCE olay_kayit_id_seq RESTART WITH 1;
            delete from olay_kayit where 1 = 1;
        </sql>
    </changeSet>

    <changeSet author="hakan.gungor" id="VERBAL-1-2022-06-03 23:14" context="sql">
        <sql splitStatements="true">
            ALTER SEQUENCE olay_detay_id_seq RESTART WITH 1;
            delete from olay_detay where 1 = 1;
        </sql>
    </changeSet>
</databaseChangeLog>